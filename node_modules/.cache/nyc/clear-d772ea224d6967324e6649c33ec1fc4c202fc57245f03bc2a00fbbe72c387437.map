{"version":3,"file":"/Users/yusramahomed/Desktop/seng2021--/se2021-23t1-einvoicing-api-h10a_CHEESECAKE-storage-api/src/functions/clear.ts","sources":["/Users/yusramahomed/Desktop/seng2021--/se2021-23t1-einvoicing-api-h10a_CHEESECAKE-storage-api/src/functions/clear.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,+CAAwC;AAExC,IAAM,KAAK,GAAG;;;;;gBACZ,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAA;gBACH,qBAAM,aAAE,CAAC,eAAe,EAAE,EAAA;;gBAAxC,WAAW,GAAG,SAA0B;gBAC9C,qBAAM,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,GAAG,CAAC,UAAO,UAAU;;;;wCAC3B,qBAAM,UAAU,CAAC,GAAG,EAAE,EAAA;;oCAAtC,aAAa,GAAG,SAAsB;oCAC5C,qBAAM,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC,UAAO,GAAG;;;4DACjD,qBAAM,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,EAAA;;wDAAtB,SAAsB,CAAC;;;;6CACxB,CAAC,CAAC,EAAA;;oCAFH,SAEG,CAAC;;;;yBACL,CAAC,CAAC,EAAA;;gBALH,SAKG,CAAC;gBACJ,sBAAO,EAAC,SAAS,EAAE,8BAA8B,EAAC,EAAC;;;KACpD,CAAC;AA4BO,sBAAK","sourcesContent":["import { db } from \"../config/firebase\";\n\nconst clear = async () => {\n  console.log(\"clearing\")\n  const collections = await db.listCollections();\n  await Promise.all(collections.map(async (collection) => {\n    const querySnapshot = await collection.get();\n    await Promise.all(querySnapshot.docs.map(async (doc) => {\n      await doc.ref.delete();\n    }));\n  }));\n  return {\"message\": \"Database cleared succesfully\"};\n};\n\n\n//commented out code \n// import { Schema, setData } from \"../db\";\n\n// function clear() {\n//   const data: Schema = {\n//     users: [],\n//     invoices: [],\n//     companies: [],\n//   };\n//   setData(data);\n//   return {};\n// }\n\n// const users = await db.collection(\"users\").get();\n// users.forEach(async (user) => {\n//   await db.collection(\"users\").doc(user.id).delete();\n// });\n// const companies = await db.collection(\"companies\").get();\n// companies.forEach(async (company) => {\n//   await db.collection(\"companies\").doc(company.id).delete();\n// });\n// const invoices = await db.collection(\"invoices\").get();\n// invoices.forEach(async (invoice) => {\n//   await db.collection(\"invoices\").doc(invoice.id).delete();\n// });\nexport { clear };\n"]}